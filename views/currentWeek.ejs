<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./partials/head.ejs') %>
  </head>

  <body>
    <%- include('./partials/header.ejs', {yearWeek: yearWeek, currentWeek:
    currentWeek}) %>

    <dialog class="modal">
      <form action="/note/newNote" method="POST" class="noteForm">
        <label for="headerInput">Input header</label>
        <input type="text" id="headerInput" name="headerInput" required />
        <label for="bodyInput">Input text</label>
        <textarea
          name="bodyInput"
          id="bodyInput"
          cols="30"
          rows="10"
          required
        ></textarea>

        <label for="tagInput" class="label">Press space to split tags</label>
        <input
          type="text"
          id="tagInput"
          name="tagInput"
          placeholder="Add a tag..."
          autocomplete="off"
          class="tag-input"
        />

        <label for="weekNumber">Input date</label>
        <input type="date" id="weekNumber" name="weekNumber" />
        <button type="submit">submit</button>
        <button type="button" class="close-modal">close modal</button>
      </form>
    </dialog>
    <form class="search-form" method="POST">
      <fieldset class="filter-tags">
        <legend>Click tags to search</legend>
        <ul>
          <li>
            <% fullTagsArray.forEach(item => { %>
            <label for="label-button" class="label-button" value="<%= item %>"
              ><%= item %></label
            >
            <input
              type="checkbox"
              id="label-button"
              class="filter-checkbox"
              name="searchTags"
              value="<%= item %>"
            />
            <% }) %>
          </li>
        </ul>
      </fieldset>
    </form>

    <ul class="note-item">
      <% notes.forEach(note => { %> <% if(note.weekNumber ===
      Number(currentWeek)) {%>
      <li data-id="<%= note._id %>" class="single-note">
        <a href="/note/remove/<%= note._id %>" class="material-icons">delete</a>
        <span class="note-title"><%= note.headerInput %></span>
        <p class="note-tags"><%= JSON.stringify(note.tagInput) %></p>

        <a href="/note/<%= note._id%>">Go to note</a>
      </li>
      <% }}) %>
    </ul>
    <footer>
      <div class="view-header">
        <h2><%=`Week ${currentWeek}` %></h2>
        <button type="button" class="material-icons open-modal">add</button>
      </div>
    </footer>
  </body>
</html>
